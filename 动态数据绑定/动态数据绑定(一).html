<script>
    /*
    * 演示结果
    */
    let app1 = new Observer({
        name: 'youngwind',
        age: 25
    });

    let app2 = new Observer({
        university: 'bupt',
        major: 'computer'
    });

    // 要实现的结果如下：
    app1.data.name // 你访问了 name
    app1.data.age = 100; // 你设置了 age，新的值为100
    app2.data.university // 你访问了 university
    app2.data.major = 'science' // 你设置了 major，新的值为 science
    
    /*
    * 方法主体
    */
    function Observer(obj) {

        this.data = {};

        //循环obj的键,对每个键都添加getter，setter
        for (let key in obj) {

            Object.defineProperty(this.data, key, {
                set: function(value) {
                    this.value = value;
                    console.log("你设置了 " + key + ",新的值为 " + value);
                },
                get: function() {
                    if (!this.value) this.value = obj[key]; //初始化值

                    console.log("你访问了 " + key);
                    return this.value;
                },
            })
        }
    }
</script>
